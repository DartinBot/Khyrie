#!/bin/bash

# Cloudflare Email Routing Quick Setup for fitfriendsclub.com
# This script provides the steps to configure email routing via Cloudflare Dashboard

echo "==================================================="
echo "Cloudflare Email Routing Setup for fitfriendsclub.com"  
echo "==================================================="
echo ""

echo "ðŸ“§ STEP 1: Enable Email Routing in Cloudflare"
echo "----------------------------------------------"
echo "1. Go to: https://dash.cloudflare.com"
echo "2. Select domain: fitfriendsclub.com" 
echo "3. Navigate to: Email â†’ Email Routing"
echo "4. Click: 'Enable Email Routing'"
echo ""

echo "ðŸ“¨ STEP 2: Add Custom Email Addresses"
echo "------------------------------------"
echo "Add these custom addresses in Cloudflare Email Routing:"
echo ""
echo "â€¢ hello@fitfriendsclub.com â†’ [YOUR-PERSONAL-EMAIL]"
echo "â€¢ support@fitfriendsclub.com â†’ [YOUR-SUPPORT-EMAIL]" 
echo ""
echo "Replace [YOUR-PERSONAL-EMAIL] with your actual Gmail/email address"
echo ""

echo "ðŸ”§ STEP 3: Verify DNS Records (Automatic)"
echo "---------------------------------------"
echo "Cloudflare will automatically add these MX records:"
echo ""
echo "â€¢ isaac.mx.cloudflare.net (Priority: 46)"
echo "â€¢ linda.mx.cloudflare.net (Priority: 92)"  
echo "â€¢ amir.mx.cloudflare.net (Priority: 78)"
echo ""

echo "ðŸ“‹ STEP 4: Verify SPF Record"
echo "---------------------------"
echo "Cloudflare should add this TXT record automatically:"
echo "v=spf1 include:_spf.mx.cloudflare.net ~all"
echo ""

echo "âœ… STEP 5: Test Email Configuration"
echo "---------------------------------"
echo "After setup (may take 5-10 minutes):"
echo ""

# Check current MX records
echo "Current MX records for fitfriendsclub.com:"
dig fitfriendsclub.com MX +short 2>/dev/null || echo "No MX records found yet"
echo ""

echo "ðŸ”„ STEP 6: Testing Commands"
echo "-------------------------"
echo "Run these commands to verify setup:"
echo ""
echo "# Check MX records:"
echo "dig fitfriendsclub.com MX"
echo ""
echo "# Check SPF record:"  
echo "dig fitfriendsclub.com TXT | grep spf"
echo ""
echo "# Test email delivery:"
echo "Send a test email to: hello@fitfriendsclub.com"
echo ""

echo "ðŸ’¡ BENEFITS OF CLOUDFLARE EMAIL ROUTING:"
echo "---------------------------------------"
echo "âœ“ Completely FREE"
echo "âœ“ No monthly fees"
echo "âœ“ Instant setup via Cloudflare dashboard"
echo "âœ“ Automatic DNS configuration"
echo "âœ“ Professional email addresses"
echo "âœ“ Email forwarding to existing accounts"
echo ""

echo "ðŸš€ ALTERNATIVE: Google Workspace (Full Email Hosting)"
echo "---------------------------------------------------"
echo "If you need full email accounts (not just forwarding):"
echo "â€¢ Cost: $6/user/month"
echo "â€¢ Full Gmail interface"
echo "â€¢ Calendar, Drive, Meet included"
echo "â€¢ Setup guide in EMAIL_HOSTING_SETUP.md"
echo ""

echo "ðŸ“ž CONTACT FORM INTEGRATION"
echo "-------------------------"
echo "Your website contact form is already configured to use:"
echo "â€¢ hello@fitfriendsclub.com (main contact)"
echo "â€¢ support@fitfriendsclub.com (support inquiries)"
echo ""
echo "Once email routing is active, form submissions will be"
echo "forwarded to your configured destination addresses."
echo ""

echo "==================================================="
echo "Setup complete! Check EMAIL_HOSTING_SETUP.md for detailed instructions."
echo "==================================================="