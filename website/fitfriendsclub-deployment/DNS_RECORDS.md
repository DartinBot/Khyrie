# FitFriendsClubs DNS Configuration Records

## üåê **Required DNS Records for Domain: fitfriendsclubs.com**

### **Primary Domain Records**

| Type | Name | Content/Target | TTL | Priority | Notes |
|------|------|---------------|-----|----------|-------|
| A | @ | 104.21.0.0 | 3600 | - | Main domain (use Cloudflare proxy IP) |
| A | www | 104.21.0.0 | 3600 | - | WWW subdomain |
| CNAME | api | fitfriendsclubs.com | 3600 | - | API subdomain for Cloudflare Workers |

### **Cloudflare Workers API Records**

| Type | Name | Content/Target | TTL | Priority | Notes |
|------|------|---------------|-----|----------|-------|
| AAAA | @ | 2606:4700::6812:1500 | 3600 | - | IPv6 for main domain |
| AAAA | www | 2606:4700::6812:1500 | 3600 | - | IPv6 for WWW |
| CNAME | api | fitfriendsclubs.com | 300 | - | **CRITICAL**: API endpoint for Workers |

### **Email & Additional Services** (Optional)

| Type | Name | Content/Target | TTL | Priority | Notes |
|------|------|---------------|-----|----------|-------|
| MX | @ | mail.fitfriendsclubs.com | 3600 | 10 | Email service (if needed) |
| TXT | @ | "v=spf1 include:_spf.google.com ~all" | 3600 | - | SPF record for email |
| TXT | _dmarc | "v=DMARC1; p=quarantine; rua=mailto:dmarc@fitfriendsclubs.com" | 3600 | - | DMARC policy |

---

## üîß **Copy-Paste DNS Records**

### **For Cloudflare Dashboard:**
```
Type: A
Name: @
Content: 104.21.0.0
TTL: Auto
Proxy: Yes (Orange Cloud)

Type: CNAME  
Name: www
Content: fitfriendsclubs.com
TTL: Auto
Proxy: Yes (Orange Cloud)

Type: CNAME
Name: api
Content: fitfriendsclubs.com  
TTL: Auto
Proxy: Yes (Orange Cloud)
```

### **For Other DNS Providers (GoDaddy, Namecheap, etc.):**
```
Type: A
Host: @
Points to: 104.21.0.0
TTL: 1 Hour

Type: CNAME
Host: www  
Points to: fitfriendsclubs.com
TTL: 1 Hour

Type: CNAME
Host: api
Points to: fitfriendsclubs.com
TTL: 1 Hour
```

---

## üöÄ **Cloudflare Workers Setup Commands**

### **1. Install Wrangler CLI**
```bash
npm install -g wrangler
```

### **2. Login to Cloudflare**
```bash
wrangler login
```

### **3. Create wrangler.toml Configuration**
Create this file in your project root:
```toml
name = "fitfriendsclubs-api"
main = "cloudflare-worker.js"
compatibility_date = "2025-01-01"

[env.production]
routes = [
  { pattern = "api.fitfriendsclubs.com/*", zone_name = "fitfriendsclubs.com" }
]

[[env.production.vars]]
DATABASE_API_URL = "your_database_url_here"

[env.production.r2_buckets]
IMAGES_BUCKET = "fitfriendsclubs-images"
```

### **4. Deploy Worker**
```bash
wrangler deploy --env production
```

### **5. Set Environment Variables**
```bash
wrangler secret put DATABASE_API_URL --env production
# Enter your PostgreSQL connection URL when prompted

wrangler secret put DATABASE_API_KEY --env production  
# Enter your database API key when prompted
```

---

## üîç **DNS Verification Commands**

### **Test DNS Resolution:**
```bash
# Check main domain
nslookup fitfriendsclubs.com

# Check API subdomain  
nslookup api.fitfriendsclubs.com

# Check with dig for detailed info
dig fitfriendsclubs.com
dig api.fitfriendsclubs.com
```

### **Test API Endpoints:**
```bash
# Health check
curl https://api.fitfriendsclubs.com/api/health

# Expected response:
# {"status":"healthy","timestamp":"2025-10-01T...","platform":"Cloudflare Workers"}
```

---

## üìã **DNS Configuration Checklist**

- [ ] **Main Domain (A Record)**: @ ‚Üí 104.21.0.0
- [ ] **WWW Subdomain (CNAME)**: www ‚Üí fitfriendsclubs.com  
- [ ] **API Subdomain (CNAME)**: api ‚Üí fitfriendsclubs.com
- [ ] **Cloudflare Proxy**: Enable orange cloud for all records
- [ ] **SSL Certificate**: Auto-generated by Cloudflare
- [ ] **Worker Route**: api.fitfriendsclubs.com/* ‚Üí fitfriendsclubs-api
- [ ] **Environment Variables**: DATABASE_URL, DATABASE_API_KEY set
- [ ] **Health Check**: https://api.fitfriendsclubs.com/api/health returns 200

---

## ‚ö†Ô∏è **Important Notes**

1. **Propagation Time**: DNS changes take 24-48 hours to fully propagate globally
2. **Cloudflare Proxy**: Keep orange cloud enabled for security and performance  
3. **SSL**: Cloudflare provides free SSL certificates automatically
4. **API Domain**: The `api.fitfriendsclubs.com` subdomain is critical for your Worker routes
5. **Testing**: Use different devices/networks to verify DNS propagation

---

## üõ† **Troubleshooting**

### **If DNS not resolving:**
- Clear local DNS cache: `sudo dscacheutil -flushcache` (macOS)
- Check nameservers point to Cloudflare
- Verify domain is added to Cloudflare account

### **If API returns 404:**
- Confirm Worker is deployed: `wrangler deployments list`
- Check route configuration in Cloudflare dashboard
- Verify custom domain is properly configured

### **If database errors:**
- Check environment variables: `wrangler secret list`
- Verify database connection URL format
- Test database connectivity separately